Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchData=exports.UpdateCacheAsync=exports.OldcacheAsync=void 0;var tslib_1=require("tslib"),OldcacheAsync=function(i){var s=Object.create(null);return function(c){return tslib_1.__awaiter(void 0,void 0,void 0,function(){var t,r,n;return tslib_1.__generator(this,function(e){switch(e.label){case 0:return(t=s[c])?[2,t]:(r=s,[4,i(n=c)]);case 1:return[2,r[n]=e.sent()]}})})}},UpdateCacheAsync=(exports.OldcacheAsync=OldcacheAsync,function(o,r){var a=new Map,u=Symbol();return function(s){return tslib_1.__awaiter(void 0,void 0,void 0,function(){return tslib_1.__generator(this,function(e){return[2,new Promise(function(e,t){r=r||s;var n=a.get(r);if(n){if(n.hit!==u)return e(n.hit);n.exector.push({resolve:e,reject:t})}else n={hit:u,exector:[{resolve:e,reject:t}]},a.set(r,n);var c,i=n.exector;1===i.length&&(c=function(){return tslib_1.__awaiter(void 0,void 0,void 0,function(){var t,r;return tslib_1.__generator(this,function(e){switch(e.label){case 0:return(e.trys.push([0,2,,3]),i.length)?[4,o(s)]:[2];case 1:for(t=e.sent();i.length;)i.shift().resolve(t);return n.hit=t,[3,3];case 2:return r=e.sent(),(0,i.shift().reject)(r),c(),[3,3];case 3:return[2]}})})})()})]})})}});function fetchData(e){return tslib_1.__awaiter(this,void 0,void 0,function(){var t;return tslib_1.__generator(this,function(e){switch(e.label){case 0:return[4,fetch("//127.0.0.1:8888")];case 1:return t=e.sent(),console.log(t),t=JSON.stringify(t),console.log(t),[2,t]}})})}exports.UpdateCacheAsync=UpdateCacheAsync,exports.fetchData=fetchData;
